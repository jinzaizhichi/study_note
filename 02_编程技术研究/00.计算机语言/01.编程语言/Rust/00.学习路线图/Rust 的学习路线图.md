# Rust 语言的学习路线图

在这个系列笔记中，我将陆续整理自己在学习 Rust 编程语言及其框架的过程中留下的笔记和代码，目的是掌握如何在生产环境中利用各种领域的第三方框架来快速开发应用程序。和大多数学习过程一样，我需要在第一部分笔记中花费一点篇幅来鸟瞰一下 Rust 语言及其所涉及的领域，以便从全局视野来规划接下来的学习路线图，为此，我会在[我个人笔记库项目](https://github.com/owlman/study_note)的`Programming/LanguageStudy/Rust`目录下创建一个名为的`RouteMap`目录，用于存放并维护接下来的这一部分笔记。

## 学习资料列表

- 网络资源：[《Rust 程序设计语言》线上版](https://www.rustwiki.org.cn/zh-CN/book/)
- 视频教程：[Rust 编程语言入门教程](https://www.bilibili.com/video/BV1hp4y1k7SV/)；
- 参考书籍：
  - [《精通 Rust》](https://book.douban.com/subject/35290878/)：本人所采用的辅助参考书之一；
  - [《Rust 实战》](https://book.douban.com/subject/36059499/)：本人所采用的辅助参考书之二；

## Rust 语言简介

Rust 是一门由 Mozilla 公司主导开发的通用、编译型程序设计语言。这门语言的设计准则为“安全、并发、实用”，支持函数式、并发式、命令式等多种编程范式，目前被认为是自 C++ 以来最全能的系统级程序设计语言。它为系统编程领域提供了一种更安全、更快速且原生支持并发的现代化解决方案，因而具有相当的学习价值。当然了，按照学习一门编程语言的惯例，在进入具体的学习规划之前，我们需要做一些知识准备工作。所以接下来，就让我们来了解一下该语言的起源故事，以便之后的学习过程中更好地理解它的设计思想。

### 项目起源故事

[Rust 项目](https://github.com/rust-lang/rust) 最初是 Mozilla 公司员工、主要负责编译器实现的语言工程师 Graydon Hoare 在 2006 年开发的一个私人试验项目。众所周知，在上个世纪 70 年代末和 80 年代初，编程语言领域出现了许多优秀的设计理念，但这些理念中的许多设计都受限于当时的技术条件，并没有机会被转化成得到广泛使用的系统级语言，Graydon Hoare 希望能在该项目中通过结合现代编程语言的相关理论来重新设计一门系统级编程语言，目标是让开发者们在系统编程领域中能在得到比 C/C++更好的编码体验的同时，避开 Java/C# 这类语言因其自身附带的大型垃圾回收机制而产生的内存开销。关于这方面的详细信息，读者可参考[InfoQ 在 2012 年对 Graydon Hoare 本人的专访](https://www.infoq.com/news/2012/08/Interview-Rust/)。至于 Mozilla 公司本身，则是从 2009 年开始赞助这个项目的，他们成立了专门的团队来支持 Rust 的开发，并开始将其应用于实验性的 Servo 浏览器引擎项目。

2010 年之后，Rust 项目正式向公众发布产品，并于同年开始改写自托管编译器（基于 LLVM 后端）来替换原来用 OCaml 写的编译器。其发布方式主要分为 stable、beta、nightly 三个版本系列。其中，nightly 版本系列会每天迭代一次，主要用于开发者针对 Rust 语言的最新特性进行学习和研究。而 beta 版本系列则是针对一些相对成熟的特性发布的测试版本，每六周迭代一次，通常用于前瞻性的试验性开发。然后，beta 系列的版本在通过了六周的测试之后，就会被合并到 stable 版本系列中，后者是主要用于实际生产环境的稳定版本。基本上，Rust 项目的发布流程就像火车一样按照时刻表井然有序。

```bash
nightly: * - - * - - * - - * - - * - - * - * - *
                     |                         |
beta:                * - - - - - - - - *       *
                                       |
stable:                                *
```

值得一提的是，Rust 这个名字在英文中的原意指的是一种生命力很强的真菌，Graydon Hoare 希望 Rust 语言可以覆盖在死去语言的残骸之上，吸收这些旧语言的优秀特性，像真菌一样拥有多种可以互相转化的生命形态。Rust 的名字从字形上糅合了 Trust 和 Robust，也暗示了“信任”和“鲁棒性”。目前来看，Rust 确实拥有了极强的生命力，让我们期待一下 Rust 的永不休眠。

### 作用领域分析

正如 Graydon Hoare 在之前提到的那次采访中所说的，Rust 语言的目标群体是“被 C++ 所困扰的开发者”，它希望帮助人们以更简单明了的方式来设计安全且快速的系统级应用程序。这意味着，这门语言应该要既可用于实现针对机器底层的具体操作，也可用于完成针对业务逻辑的抽象设计。具体来说，开发者们可以通过学习和使用 Rust 这门编程语言来让自己在工作中获得以下能力：

- **可使用更有效率的编程工具链**：Rust 语言为开发者们提供了得到了精心维护且便于查询的官方文档、以及支持多种编辑器的完整工具链，其中提供了语法错误提示、智能自动补全、自动类型监测、自动格式化、包管理以及编译与构建等功能，使得开发者们可以在不使用任何第三方工具的情况下，轻松利用这一工具链进行高效的编程工作。
- **可进行更方便的多线程开发**：Rust 语言独特的所有权机制和内存安全的特性也为实现没有数据竞争的并发提供了语言层面上的原生支持。
- **可开发面向 WebAssembly 应用程序**：WebAssembly 的出现解决了人们希望在 Web 浏览器、嵌入式设备等环境中执行计算密集型操作的需求。而用 Rust 语言编写的代码可以被直接编译成 WebAssembly 程序，这样就能确保程序在上述执行环境中拥有与本地代码相似的执行速度。
- **可编写更安全的应用程序**：与 C/C++ 语言相比，Rust 语言可以利用其所有权、生命周期等特性来帮助开发者们在语言层面上去解决内存管理、数据布局等系统编程难题。
- **可获得更优秀的执行性能**：与 Java/C# 等语言相比，Rust 语言对内存安全的承诺并不依赖于庞大的运行时环境（Runtime Environment）与垃圾回收器机制（GC），这种遵循零成本抽象（Zero-Cost Abstraction）规则的设计在赋予了开发者更多底层操作能力的同时，也提高了应用程序的执行性能。

当然了，Rust 语言也是存在一些不足的，例如学习曲线陡峭就是一个经常被开发者们抱怨的问题。在 2020 年的一份调查报告中，约 15.8% 的开发者认为“如果 Rust 更好学一些，使用它的人会应该更多”，其中生命周期、所有权等概念对于初学者来说可能难以理解，特别是“生命周期”，有 61.4% 的反馈者认为难以理解或学习困难。除此之外，编译时间较长也是 Rust 社区一直在讨论的问题。在上面提到的那份报告中，约 50.5% 开发者感觉已经有一定的提升，但缩短 Rust 的编译时间仍然是 Rust 团队接下来的重要任务。

然而，这些不足并不妨碍 Rust 成为近年来最为热门的编程语言之一。根据 Stack Overflow 对开发者的调研显示，虽然只有 7% 的开发者表示自己正在使用 Rust，对比 JavaScript、Python 等语言，使用 Rust 的开发者占比并不高；但从 2016 年开始，Rust 每年都是开发者们最喜爱的编程语言。下面，让我们继续来了解一下能让该语言的上述优势得到发挥的主要领域：

- **学术研究**：Rust 语言在计算机专业领域中是一个很好的学术研究工具。例如，人们可以学习如何使用 Rust 语言开发操作系统，这个学习过程将帮助他们更好地理解操作系统中的各种概念。
- **团队合作**：对于开发者团队来说， Rust 语言是非常实用的工具。众所周知，低水平的程序代码会包含很多 bug，需要测试人员进行覆盖测试广泛验证。然而在 Rust 语言中，如果程序代码中包含 bug，编译器将拒绝编译代码，这样一来，开发者就可以更专注于程序的业务逻辑了。
- **商业开发**：到目前为止，已经有不少大大小小的公司选择使用 Rust 语言来完成各种商业开发的任务。这些任务包括命令行工具，Web 服务，DevOps 工具，嵌入式设备，音频和视频的分析和转码，加密货币，生物信息学，搜索引擎，物联网应用，机器学习，甚至是火狐浏览器的重要组成部分。
- **开源运动**：Rust 本身就是一门遵守 Apache 和 MIT 开源许可证的程序设计语言，这意味人们可以按照这些许可证赋予的权益参与各种 Rust 语言设计与推广的公益活动。

### 开源社区生态

虽然 Rust 项目的主要资金来自 Mozilla 公司的资助，但本质上依然是一个由开发者社区共有的开源项目，它相当大一部分代码来自于开源社区的贡献者。因此，该项目有着完善的提案流程（RFC，Request For Comments），每一个人都可以提交提案，进行开发工作的核心团队细分为专项治理语言项目、社区运营、语言核心开发、工具开发、库开发等，来管理维护各个项目的各方面事项。

最近，由于受到新冠肺炎疫情的影响，Mozilla 公司在 2020 年 8 月宣布裁员四分之一，这其中包括了 Rust 开发团队，这显然是非常令人惋惜的。但塞翁失马焉知非福，由于 Rust 开发团队的专家们被裁后加入了 Facebook、Amazon、Google 等科技巨头公司，客观上或许也会更有利于 Rust 语言的推广，并获得更多资源支持。例如，Rust 基金会在2021 年 2 月宣布成立，其赞助商中就包括了华为、AWS、Google、Microsoft、Facebook 等一众计算机科技界的巨头企业，在这里，笔者真心希望该基金会能专注于促进 Rust 语言的开发与生态发展。

### 应用现况简介

就目前的情况来看，安全问题通常是商业公司考虑采用 Rust 语言的首要原因，Rust 在没有牺牲性能的情况下提供了比 C/C++ 安全的系统编程，使其成为了更好的选择。但根据 JetBrains 2021 年的调研报告，出于兴趣或为私人项目选择 Rust 的开发者仍然占大多数，真正用于工作的开发者仅占 16%，而 Go 语言用于工作的开发者比例占到了 61%，差距明显。为 Rust 项目提供支持、给 Rust 开发者创造更多工作机会也是 Rust 基金会的目标之一。

下面，让我们来介绍一些知名的计算机科技公司对 Rust 语言的具体应用情况。

- **Google**：该公司于 2016 年开始开发一个名为 Fuchsia 操作系统，该项目在 2020 年 12 月首次亮相于 Google Open Source，项目中有 22% 的代码是使用 Rust 语言来编写的。
- **Microsoft**：该公司在 2019 年 2 月发布报告称其产品中 70% 的安全问题为内存安全问题，为了解决安全问题，开始尝试使用 Rust 来代替 C/C++ 重写 Windows 组件；除此之外，Microsoft 的 DeisLabs 团队也选择 Rust 来构建 Kubernetes 工具 Krustlet，并称 Rust 比 Go 更适合 Kubernetes 的开发。
- **Meta**：该公司最早使用 Rust 语言的项目可追溯到 2016 年。当时，Facebook 的源代码管理团队启动了一个名为 Mononoke 的重写项目，目标是改善公司内部使用的源代码管理工具，以便更好地服务于 Facebook 的数千名开发人员和自动化流程。当时，Facebook 的后端代码库非常依赖于 C++，这意味着 Mononoke 默认情况下应该用 C++来实现。但是源控制团队需要考虑源控制后端的可靠性需求。因为当损坏或停机可能导致服务中断时，可靠性显然是重中之重。这就是为什么团队选择在 C++ 代码库上使用 Rust 语言的原因。Mononoke 项目的生产实践，证明了 Rust 的实用性。
- **Amazon**：该公司于 2017 年开始在其提供的部分服务中采用了 Rust 语言，例如 Firecracker、Botterocket 等。
- **PingCAP**：该公司于 2016 年 1 月开始使用 Rust 语言来开发底层分布式储存 TIKV，并于 2016 年 4 月宣布将该项目开源。
- **字节跳动**：其远程办公系统“飞书”的开发团队从 2017 年开始在该项目中采用 Rust 语言，该系统在客户端的非 UI 部分就是依靠 Rust 语言来实现跨平台的。除此之外，该公司在 2021 年 5 月宣布开源的 rsmpeg 项目，也是选择了 Rust 来作为其主要的开发语言。

总而言之，Rust 语言的设计侧重于内存安全、零成本抽象和实用性，尤其是它致力于解决的内存安全问题一直以来是系统开发的痛点，传统领域如网络、数据库对于安全要求越来越高，新兴领域如区块链天然对于安全性就有极高的要求，因此 Rust 这门新的编程语言才能迅速获得国内外公司的青睐，成为 C/C++ 的有力竞争者。

## 规划路线图

在对 Rust 语言及其涉及的领域有了一定地了解之后，接下来就可以来具体规划一下要学习如何使用 Rust 语言及其扩展库来进行系统级开发了。大致上，我们可以将该语言的学习路线图划分为以下四个里程碑。

### 配置开发环境

正所谓工欲善其事，必先利器，虽然 Rust 属于跨平台的编程语言，但这种跨平台的特性是依靠编译器、包管理器及项目自动化构建工具组成的开发工具链来实现的。而由于后者本身是平台相关的，所以在正式开始学习这门编程语言之前，我们的首要任务就是要根据自己所在的平台来安装并配置好该语言的开发环境，并学会使用这些工具。

达成这一里程碑的标准是使用自己配置好的开发环境来编写一个 Rust 版本的 Hello World 程序，并让看看它在计算机设备上成功运行起来。

> 这部分的学习过程可参考：[[Rust 学习笔记：快速上手篇]]

### 掌握基本语法

接下来，我们需要掌握的是 Rust 语言的基本语法。这一部分的学习内容包括了解该语言所支持的数据类型，并灵活运用变量、表达式、流程控制、函数、闭包与宏等基本语法元素。达成这一里程碑的标准是能实现各种典型的算法以及这些算法中使用到的数据结构，并能重复使用这些实现。

> 这部分的学习过程可参考：[[Rust 学习笔记：语法学习篇]]

### 引入相关扩展

这一里程碑主要聚焦的是*快速学习能力*。在如今的软件开发活动中，对特定功能的开发都是通过引入特定的第三方扩展库与框架来完成的。但是，我们可以选择的第三方扩展库与框架不仅琳琅满目，选择众多，而且通常新陈代谢极为快速。这意味着，即使我们在这里介绍了当前最为流行的扩展库与框架，很有可能只需要几个月的时间，开发者们就已经有了更好的选择。所以授之以鱼不如授之以渔，达成这一里程碑的标准我们是否能快速地根据项目需求来引入相关的扩展库或框架并能掌握它们的使用方法。

> 这部分的学习过程可参考：[[Rust 学习笔记：扩展应用篇]]

### 累积项目经验

在学习编程语言的最后一个阶段中，我们的任务是要在具体的生产环境中不断地积累项目经验，该任务想要达成的主要目的如下：

1. **在实践中应用知识**：只有面向生产环境开展具体的开发工作，程序员们才有机会将自己学到的理论知识应用到实际的项目中去。这助于他们加深对编程语言的理解和掌握，并且能够更好地理解代码的运行方式、逻辑和异常处理等方面。
2. **锻炼解决问题的能力**：在项目开发过程中，程序员会面临各种各样的问题和挑战。通过解决这些问题，他们可以提高自己的问题解决能力和逻辑思维能力。这对于成为一个优秀的程序员是至关重要的，因为在实际工作中，解决问题是一项核心技能。
3. **提升编程技巧**：通过不断地实际开发项目，程序员会逐渐地积累起丰富的编程经验，掌握更多的技巧和最佳实践。项目经验使他们能够熟悉常见的编程模式、数据结构和算法，并学会如何在实践中选择和应用适当的工具和技术。
4. **建立自信心**：通过完成实际项目，程序员将会逐渐地建立起自己对这一职业的自信心。他们可以看到自己的努力和成长，并且培养对自己能力的信心。这对于未来在编程领域中追求更高目标和面对更大项目的挑战至关重要。
5. **丰富个人作品集**：项目经验可以丰富程序员的个人作品集。这是职业能力的有力证明，无论是求职还是与他人合作，他们都可以展示自己参与过的项目，并说明自己在开发过程中承担的角色和贡献，这将有力地提升程序员在职场中的竞争力。

总之，积累项目经验对于一名优秀程序员的培养是至关重要的，这些经验将对我们未来的编程生涯产生积极的影响。

> 这部分的学习过程可参考：[[Rust 学习笔记：项目实践篇]]

----
#待深入
